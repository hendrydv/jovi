<head>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        tr:nth-child(even) {
            background-color: #DDDDDD;
        }
    </style>
</head>
<body>
<header>
    <img src="data:image/png;base64,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" alt="Logo" class="h-16">
    <h1>Inspectie rapport:</h1>
</header>
<div class="company-info">
    <p>Bedrijfsnaam: {{$record->customer->name}}</p>
    <div class="address">
        @php $location = $record->inspectionMachineResults->first()->space_machine->space->department->location@endphp
        <p>Adresgegevens:</p>
        <p>{{ $location->street }}, {{ $location->house_number }}</p>
        <p>{{ $location->zip_code }}, {{ $location->city }}</p>
    </div>
</div>
<div class="Inspection-details">
    <p>Inspectie datum: {{ $record->date }}</p>
    <p>Inspectie locatie: {{ $record->inspectionMachineResults->first()->space_machine->space->department->location->fullAddress() }}</p>
    <p>Inspectie uitgevoerd door: {{ $record->user->name }}</p>
</div>
<div class="Inspection-table">
    {{$oldDepartment = null}}
    {{$oldSpace = null}}
    {{$oldMachine = null}}
    @foreach($record->inspectionMachineResults as $result)
        @if($result->space_machine->space->department->name != $oldDepartment)
            <h3>Afdeling: {{ $result->space_machine->space->department->name }}</h3>
            @php $oldDepartment = $result->space_machine->space->department->name @endphp
            @endif

            @if($result->space_machine->space->name != $oldSpace)
                @if(!is_null($oldSpace))
                    </tbody>
            </table>
        @endif
        <h4>Ruimte: {{$result->space_machine->space->name}}</h4>
        <table>
            <thead>
            <tr>
                <th>Machine:</th>
                <th>Vraag:</th>
                <th>Resultaat:</th>
                <th>Optie:</th>
                <th>Notitie:</th>
            </tr>
            </thead>
            <tbody>
            @endif

            <tr>
                <td>@if($result->space_machine->machine->fullMachineName() != $oldMachine){{$result->space_machine->machine->fullMachineName()}}@endif</td>
                <td>{{$result->question->question}}</td>
                <td>@if($result->result != null){{$result->result}}@else --- @endif</td>
                <td>@if($result->option != null){{$result->option->option}}@else --- @endif</td>
                <td>@if($result->comment != null){{$result->comment}}@else --- @endif</td>
            </tr>

            {{$oldSpace = $result->space_machine->space->name}}
            {{$oldMachine = $result->space_machine->machine->fullMachineName()}}

            @endforeach

            </tbody>
        </table>
</div>
<script type="text/php">
if ( isset($pdf) ) {
$pdf->page_script('
if ($PAGE_COUNT > 1) {
$font = $fontMetrics->get_font("Arial, Helvetica, sans-serif", "normal");
$size = 12;
$pageText = "Pagina " . $PAGE_NUM . " van " . $PAGE_COUNT;
$y = 810;
$x = 260;
$pdf->text($x, $y, $pageText, $font, $size);
}
');
}
</script>
</body>
